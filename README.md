# Synteny Visualization with GenomeD3Plot

This directory contains a synteny visualization tool using D3.js to visualize synteny blocks between assembly contigs and the reference genome.

## Files

- `convert_paf_to_json.py` - Python script to convert PAF alignment files to JSON format
- `index.html` - Interactive HTML visualization using D3.js
- `synteny_data.json` - JSON data file (generated by the conversion script)

## Setup

1. **Generate the JSON data file:**

   ```bash
   python convert_paf_to_json.py ../runs_3511/alignment.paf ../runs_3511/assembly.fasta.fai ../C_glabrata_CBS138_current_chromosomes.fasta.fai synteny_data.json
   ```

   You can use any of the available PAF files:
   - `../runs_3511/alignment.paf`
   - `../runs_3512/alignment.paf`
   - `../runs_3567/alignment.paf`
   - `../runs_3569/alignment.paf`

2. **View the visualization:**

   Open `index.html` in a web browser. You can use a local web server:

   ```bash
   python3 -m http.server 8000
   ```

   Then open `http://localhost:8000` in your browser.

## Features

- Interactive synteny visualization showing links between assembly contigs and reference chromosomes
- Color-coded links based on alignment identity:
  - Green: ≥95% identity
  - Blue: ≥90% identity
  - Orange: ≥85% identity
  - Red: <85% identity
- Filterable by minimum identity threshold
- Hover tooltips showing detailed alignment information
- Linear genome view with sequences arranged horizontally

## Usage

1. Use the slider to adjust the minimum identity threshold
2. Hover over synteny links to see detailed information
3. The visualization shows:
   - Blue rectangles: Assembly contigs (top)
   - Red rectangles: Reference chromosomes (bottom)
   - Colored curves: Synteny links between them

## Customization

You can modify the visualization by editing `index.html`:
- Adjust `width` and `height` variables to change plot size
- Modify color schemes in the `getColorForIdentity()` function
- Change filtering parameters in `convert_paf_to_json.py`
